<!DOCTYPE html>
<html>
<head>
  <% include ../partials/header.ejs %>
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.9/angular.min.js"></script>
</head>

<body>

  <% include ../partials/nav.ejs %>

<div ng-app="lh" ng-controller="myCtrl">
    <div class="form-group row desktop">
        <div class="col-md-4 col-xs-12">
            <label for="sem">Semester: </label>
            <select class="form-control" id="sem" ng-model="sem" ng-change="getResults()"> 
                    <option value="any">Any</option>
                    <option>I Year</option>
                    <option>III</option>
                    <option>IV</option>
                    <option>V</option>
                    <option>VI</option>
                    <option>VII</option>
                    <option>VIII</option>
            </select>
        </div>
        <div class="col-md-4 col-xs-12">
            <label for="branch">Branch: </label>
            <select class="form-control" id="branch" ng-model="branch" ng-change="getResults()">
                    <option value="any">Any</option>
                    <option>CS</option>
                    <option>IT</option>
                    <option>ETC</option>
                    <option>EI</option>
                    <option>Mech</option>
                    <option>Civil</option>
            </select>
        </div>
        <div class="col-md-4 col-xs-12">
            <label for="type">Type: </label>
            <select class="form-control" id="type" ng-model="type" ng-change="getResults()">
                    <option value="any">Any</option>
                    <option>Notes</option>
                    <option>Question Papers</option>
                    <option>Books</option>
                    <option>Other</option>
            </select>
        </div>
    </div>
    <div class="row">
        <div class="col-md-4 col-xs-12" ng-repeat="file in files" class="studyFile" ng-click="location.href='file.webViewLink'">
            <span>{{file.properties.sem}} {{file.properties.branch}} {{file.properties.type}}</span>
            {{file.name}}
            {{file.properties.uploader}}
        </div>
    </div>
</div>

</body>

<script type="text/javascript">var _Hasync= _Hasync|| [];
_Hasync.push(['Histats.start', '1,3693901,4,0,0,0,00010000']);
_Hasync.push(['Histats.fasi', '1']);
_Hasync.push(['Histats.track_hits', '']);
(function() {
var hs = document.createElement('script'); hs.type = 'text/javascript'; hs.async = true;
hs.src = ('//s10.histats.com/js15_as.js');
(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(hs);
})();</script>
<noscript><a href="/" target="_blank"><img  src="//sstatic1.histats.com/0.gif?3693901&101" alt="free counter statistics" border="0"></a></noscript>
<!-- Histats.com  END  -->

<script>

    //--------------Value of options = Folder Id of all google drive folders -----------------------
    var drive_arr = ["12JTuWJqxB4XwK-3XcSnXFYP2Zrl8SAjU", "1XROM3Wj6mHAEeLPq3aznqICfU0rpPZMY", "1AP6o61I12drcbGLIHTkogX-1T9qIMghf", "1rfBVBb-X26w4Wohdc2nj1TbWAbt_68n5", "1ZMZ9op4Q1fw2_1WMCVckqhzgRkoAgPTr", "1TKqtiaNTvOhEhTtw6_1FH3JIzqVlXiL3",
   "1Zbywe2z39Ab8wu8Rt02aoXK1jJrrQmaO", "1yJJzCbIPitG3UFLr1t1VeMiBb2NS2015", "1tY6_-K9oFfy4I_3pafvwlyzA0-LRZb1p", "1VGk1uBxuYoyy05jnwlIvwh_sJskNWBc0",
   "1vZIgq_0MthVpHbTyrV8cPAe1gKoXcSBv", "1kEGQ7NFBsbsgFV_LXVCeBBC2gWjQXtpw", "1w1eX1iWTx8RCr7XfSK51ixP4HNl29goE", "1PDpLm3Pm90txBbJL8hyF7i9m8QxVj5Vv", "1fMSz9gQHmJ_cVfcaCeWMWNw7k-L1ZnWf", "1feA5FBQsnvhwYNIch6awiGeK-ABwQc0m", "19jzGpg8aBR8xFluK-ot54hNhQSVJ2Yia"];
   var count =  16;
    $('#sem option').each((ind, elem)=>{
      if(ind!=0) 
      $(elem).attr('value',drive_arr[count--]);
    });
    $('#type option').each((ind, elem)=>{
      if(ind!=0) 
      $(elem).attr('value',drive_arr[count--]);
    });
    $('#branch option').each((ind, elem)=>{
      if(ind!=0)
      $(elem).attr('value',drive_arr[count--]);
    });


    var app = angular.module("lh", []);
    app.controller("myCtrl", function($scope, $http) {
        $scope.files = [];
      //----- If you want to work in backend then uncomment this--------
      /*
            $scope.getResults = function(){
            var sem = $scope.sem;
            var branch = $scope.branch;
            var type = $scope.type;
            console.log(sem);
            $http.get('getResults?sem='+sem+"&branch="+branch+"&type="+type).then(function(res){            
                var files = res.data.files;
                $scope.files = files;
                console.log(files);
            });
        }*/


        //--------- If you want to work in backend then comment this.. --------
        //---------This is used to populate the files array with random gibber----

        $scope.files = [
            {
                name : "MST1.pdf",
                properties : {sem: "I", branch: "CS", type: "Notes", uploader: "Pappu"},
                webViewLink : "http://www.facebook.com"
            },
            {
                name : "MST2.pdf",
                properties : {sem: "II", branch: "ETC", type: "Notes", uploader: "Pappu"},
                webViewLink : "http://www.facebook.com"
            },
            {
                name : "MST1.pdf",
                properties : {sem: "IV", branch: "Mech", type: "Notes", uploader: "Pappu"},
                webViewLink : "http://www.facebook.com"
            },
            {
                name : "MST1.pdf",
                properties : {sem: "VII", branch: "CS", type: "Notes", uploader: "Pappu"},
                webViewLink : "http://www.facebook.com"
            },
            {
                name : "MST1.pdf",
                properties : {sem: "IX", branch: "CS", type: "Notes", uploader: "Pappu"},
                webViewLink : "http://www.facebook.com"
            },
            {
                name : "MST1.pdf",
                properties : {sem: "100", branch: "CS", type: "Notes", uploader: "Pappu"},
                webViewLink : "http://www.facebook.com"
            }
        ]
    
    });

   //------------------- Used to move the underline marker in the navigation bar ----------------------

    $('.current').removeClass('current');
    $('.nav-item:nth-of-type(2)').addClass('current');
    var left = $('.current').offset().left + 10;
    var width = $('.current').width();
    $('#marker').stop().animate( {  left: left, width: width  }, 0 );
$('.nav-item').mouseover(function(){
  var left = $(this).offset().left + 10;
  var width = $(this).width();
  $('#marker').stop().animate( {  left: left, width: width  }, 500 );
});

$('.nav-item').mouseout(function(){
  var left = $('.current').offset().left + 10;
  var width = $('.current').width();
  $('#marker').stop().animate( {  left: left, width: width  }, 500 );
});
</script>
</html>
